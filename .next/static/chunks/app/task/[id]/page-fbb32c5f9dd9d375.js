(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{1042:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(5155),i=t(2115),n=t(5695),c=t(3233);function r(e){let{children:s}=e,t=(0,n.useRouter)(),[r,l]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=!0;c.N.auth.getSession().then(s=>{let{data:a}=s;e&&(a.session?l(!0):t.replace("/login"))});let{data:s}=c.N.auth.onAuthStateChange((e,s)=>{s?l(!0):t.replace("/login")});return()=>{e=!1;try{s.subscription.unsubscribe()}catch(e){}}},[t]),r)?(0,a.jsx)("div",{className:"container-app",children:s}):(0,a.jsx)("div",{className:"container-app p-6",children:"Loading…"})}},2609:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),i=t(2115),n=t(5695),c=t(3233),r=t(1042),l=t(7605),u=t(7799);function o(){let{id:e}=(0,n.useParams)(),s=(0,n.useRouter)(),[t,o]=(0,i.useState)(null);async function d(){let{data:t}=await c.N.auth.getUser(),{error:a}=await c.N.from("task_assignees").insert({task_id:Number(e),helper:t.user.id});if(a)return alert(a.message);let{error:i}=await c.N.from("tasks").update({status:"assigned"}).eq("id",e);if(i)return alert(i.message);s.push("/chat/".concat(e))}return((0,i.useEffect)(()=>{let s=async()=>{let{data:s}=await c.N.from("tasks").select("*").eq("id",e).single();o(s)};s();let t=c.N.channel("task-".concat(e)).on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:"id=eq.".concat(e)},()=>s()).subscribe();return()=>{c.N.removeChannel(t)}},[e]),t)?(0,a.jsxs)(r.A,{children:[(0,a.jsx)(l.A,{title:"Task"}),(0,a.jsxs)("div",{className:"px-4 py-3 space-y-3",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:t.title}),(0,a.jsxs)("div",{className:"text-gray-600",children:["\uD83D\uDCCD ",t.location]}),(0,a.jsxs)("div",{children:["Tip: ",(0,a.jsxs)("span",{className:"text-blue-600 font-semibold",children:["Rs. ",t.tip_amount]})]}),(0,a.jsx)("p",{className:"text-gray-700",children:t.description}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Status: ",t.status]}),"open"===t.status&&(0,a.jsx)("button",{onClick:d,className:"w-full bg-blue-600 text-white rounded-lg py-3",children:"Accept Task"}),(0,a.jsx)("button",{onClick:()=>s.push("/chat/".concat(e)),className:"w-full border rounded-lg py-3",children:"Open Chat"})]}),(0,a.jsx)(u.A,{})]}):(0,a.jsx)("div",{className:"container-app p-6",children:"Loading…"})}},3233:(e,s,t)=>{"use strict";t.d(s,{N:()=>a});let a=(0,t(2354).UU)("https://ixrecmfguwautitoatcc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4cmVjbWZndXdhdXRpdG9hdGNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwOTUxODMsImV4cCI6MjA3MDY3MTE4M30.ImkR-P4lGGIR0_e31Fu6tGLGM1DPE-15mcN-Q9iFR1w",{auth:{persistSession:!0,autoRefreshToken:!0}})},6945:(e,s,t)=>{Promise.resolve().then(t.bind(t,2609))},7605:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(5155),i=t(6874),n=t.n(i);function c(e){let{title:s="Campus Tasker"}=e;return(0,a.jsx)("div",{className:"header",children:(0,a.jsx)("div",{className:"max-w-[480px] mx-auto px-4 py-3 flex items-center justify-between",children:(0,a.jsx)(n(),{href:"/",className:"font-semibold",children:s})})})}},7799:(e,s,t)=>{"use strict";t.d(s,{A:()=>h});var a=t(5155),i=t(6874),n=t.n(i),c=t(5695),r=t(7340),l=t(1497),u=t(4186),o=t(1007);let d=[{href:"/",label:"Feed",icon:r.A},{href:"/chat",label:"Chats",icon:l.A},{href:"/history",label:"History",icon:u.A},{href:"/profile",label:"Profile",icon:o.A}];function h(){let e=(0,c.usePathname)();return(0,a.jsx)("nav",{className:"bottom-nav",children:(0,a.jsx)("div",{className:"max-w-[480px] mx-auto grid grid-cols-4 text-sm",children:d.map(s=>{let{href:t,label:i,icon:c}=s;return(0,a.jsxs)(n(),{href:t,className:"flex flex-col items-center justify-center py-2 ".concat(e===t?"text-black":"text-gray-500"),children:[(0,a.jsx)(c,{size:20}),(0,a.jsx)("span",{className:"text-[11px] mt-0.5",children:i})]},t)})})})}}},e=>{e.O(0,[354,134,441,964,358],()=>e(e.s=6945)),_N_E=e.O()}]);