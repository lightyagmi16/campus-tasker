(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{1042:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155),i=s(2115),r=s(5695),c=s(3233);function n(e){let{children:t}=e,s=(0,r.useRouter)(),[n,l]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=!0;c.N.auth.getSession().then(t=>{let{data:a}=t;e&&(a.session?l(!0):s.replace("/login"))});let{data:t}=c.N.auth.onAuthStateChange((e,t)=>{t?l(!0):s.replace("/login")});return()=>{e=!1;try{t.subscription.unsubscribe()}catch(e){}}},[s]),n)?(0,a.jsx)("div",{className:"container-app",children:t}):(0,a.jsx)("div",{className:"container-app p-6",children:"Loadingâ€¦"})}},1730:(e,t,s)=>{Promise.resolve().then(s.bind(s,4952))},3233:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(2354).UU)("https://ixrecmfguwautitoatcc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4cmVjbWZndXdhdXRpdG9hdGNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwOTUxODMsImV4cCI6MjA3MDY3MTE4M30.ImkR-P4lGGIR0_e31Fu6tGLGM1DPE-15mcN-Q9iFR1w",{auth:{persistSession:!0,autoRefreshToken:!0}})},4952:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),i=s(2115),r=s(3233),c=s(1042),n=s(7605),l=s(7799),d=s(6874),o=s.n(d);function h(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{let{data:e}=await r.N.auth.getUser(),s=e.user.id,{data:a}=await r.N.from("tasks").select("*").eq("creator",s),{data:i}=await r.N.from("task_assignees").select("task_id").eq("helper",s),c=new Set([...(a||[]).map(e=>e.id),...(i||[]).map(e=>e.task_id)]);if(0===c.size)return t([]);let{data:n}=await r.N.from("tasks").select("*").in("id",Array.from(c)).order("created_at",{ascending:!1});t(n||[])})()},[]),(0,a.jsxs)(c.A,{children:[(0,a.jsx)(n.A,{title:"Chats"}),(0,a.jsxs)("div",{className:"px-4 py-3",children:[0===e.length&&(0,a.jsx)("div",{className:"text-gray-500",children:"No chats yet."}),e.map(e=>(0,a.jsxs)(o(),{href:"/chat/".concat(e.id),className:"block border rounded-xl p-4 mb-3 hover:bg-gray-50",children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Tap to open chat"})]},e.id))]}),(0,a.jsx)(l.A,{})]})}},7605:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(5155),i=s(6874),r=s.n(i);function c(e){let{title:t="Campus Tasker"}=e;return(0,a.jsx)("div",{className:"header",children:(0,a.jsx)("div",{className:"max-w-[480px] mx-auto px-4 py-3 flex items-center justify-between",children:(0,a.jsx)(r(),{href:"/",className:"font-semibold",children:t})})})}},7799:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(5155),i=s(6874),r=s.n(i),c=s(5695),n=s(7340),l=s(1497),d=s(4186),o=s(1007);let h=[{href:"/",label:"Feed",icon:n.A},{href:"/chat",label:"Chats",icon:l.A},{href:"/history",label:"History",icon:d.A},{href:"/profile",label:"Profile",icon:o.A}];function u(){let e=(0,c.usePathname)();return(0,a.jsx)("nav",{className:"bottom-nav",children:(0,a.jsx)("div",{className:"max-w-[480px] mx-auto grid grid-cols-4 text-sm",children:h.map(t=>{let{href:s,label:i,icon:c}=t;return(0,a.jsxs)(r(),{href:s,className:"flex flex-col items-center justify-center py-2 ".concat(e===s?"text-black":"text-gray-500"),children:[(0,a.jsx)(c,{size:20}),(0,a.jsx)("span",{className:"text-[11px] mt-0.5",children:i})]},s)})})})}}},e=>{e.O(0,[354,134,441,964,358],()=>e(e.s=1730)),_N_E=e.O()}]);